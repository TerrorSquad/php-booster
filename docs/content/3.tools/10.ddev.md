---
title: DDEV Integration
description: How PHP Booster integrates with DDEV development environments
navigation:
  icon: i-heroicons-server-stack
---

## Overview

PHP Booster automatically detects and adapts to DDEV environments. When a `.ddev/` directory is present in your project, the integration script and Git hooks will use DDEV-specific commands and configurations.

## Auto-Detection

The booster detects DDEV projects by checking for the `.ddev/` directory:

```bash
# During integration
if [ -d ".ddev" ]; then
  # Uses ddev composer, ddev exec, etc.
fi
```

Git hooks also detect DDEV at runtime and execute tools inside the DDEV container.

## How Tools Execute in DDEV

### PHP Tools

PHP tools (PHPStan, ECS, Rector, Psalm) run inside the DDEV web container:

| Tool | Standard | DDEV |
|------|----------|------|
| PHPStan | `vendor/bin/phpstan` | `ddev exec vendor/bin/phpstan` |
| ECS | `vendor/bin/ecs` | `ddev exec vendor/bin/ecs` |
| Rector | `vendor/bin/rector` | `ddev exec vendor/bin/rector` |
| Psalm | `vendor/bin/psalm` | `ddev exec vendor/bin/psalm` |
| Composer | `composer` | `ddev composer` |

### Node Tools

Node tools (ESLint, Prettier, Stylelint) run on the host machine, not inside DDEV. This is because:
- Node.js is typically available on the host
- Node tools don't need the PHP/database environment
- Faster execution without container overhead

## Configuration Changes

When DDEV is detected, the integration script applies additional configurations:

### Xdebug Trigger

The script adds an Xdebug trigger to nginx configuration:

```nginx
location ~ \.php$ {
    # Always trigger Xdebug for web requests
    fastcgi_param XDEBUG_TRIGGER 1;
}
```

This enables step debugging for web requests while keeping CLI execution fast.

### DDEV Config Merge

The script can merge additional DDEV configuration from the booster into your project's `.ddev/config.yaml`.

## Mutagen Sync

For projects using [Mutagen](https://mutagen.io/) sync (common on macOS), the Git hooks include:

```typescript
// Ensure files are synced before running PHP tools
await ensureMutagenSync()
```

This waits for file synchronization to complete before executing tools, preventing "file not found" errors.

## Composer Commands

During integration, Composer commands run via DDEV:

```bash
# Install dependencies
ddev composer require --dev phpstan/phpstan

# Run scripts
ddev composer phpstan
```

## Troubleshooting

### Permission Issues

If you encounter permission errors, ensure DDEV has proper ownership:

```bash
ddev exec chown -R $(id -u):$(id -g) vendor/
```

### Tool Not Found

If a PHP tool isn't found inside DDEV:

1. Check that the tool is installed:
   ```bash
   ddev composer show | grep phpstan
   ```

2. Restart DDEV to refresh paths:
   ```bash
   ddev restart
   ```

### Mutagen Sync Delays

For Mutagen sync issues:

```bash
# Check sync status
mutagen sync list

# Force flush
mutagen sync flush
```

### Xdebug Not Triggering

Verify the nginx config was updated:

```bash
ddev exec cat /etc/nginx/sites-enabled/*.conf | grep XDEBUG_TRIGGER
```

If missing, run the integration again or manually add the `fastcgi_param` to your `.ddev/nginx_full/nginx-site.conf`.

## Environment Variables

| Variable | Description |
|----------|-------------|
| `DDEV_PROJECT` | Set automatically by DDEV inside containers |
| `XDEBUG_TRIGGER` | Set by nginx for web requests |
| `IS_DDEV_PROJECT` | Set to `1` by booster hooks when DDEV detected |

## Skipping DDEV Detection

To force non-DDEV behavior (for testing), temporarily rename or remove the `.ddev/` directory.

## Related

- [Integration Guide](/integration_guide) - Full integration instructions
- [Git Hooks](/tools/git_hooks) - Hook configuration and usage
- [Static Analysis](/tools/static_analysis) - PHPStan, Psalm configuration

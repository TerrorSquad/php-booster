---
title: Static Analysis
navigation: true
layout: default
---

# Static Analysis

## Introduction

Static analysis is a powerful technique for analyzing your code without actually executing it. It helps identify potential errors, inconsistencies, and code smells early in the development process, leading to more robust and maintainable PHP applications.

In this Booster, we leverage three leading static analysis tools: [PHPStan](https://phpstan.org/), [Psalm](https://psalm.dev/), and [Phan](https://github.com/phan/phan). Let's explore how they work and how to integrate them into your PHP projects.

## PHPStan: Your Code's Guardian Angel

PHPStan focuses on finding errors in your code, such as:

* Undefined variables and methods
* Type mismatches
* Incorrect function calls
* Dead code

### Usage - PHPStan

Use the following command, which is also defined as a Composer script:

```bash
composer phpstan 
```

* **In your IDE:** Install the PHPStan plugin for your IDE to get real-time feedback and inline error highlighting.
* **For SonarQube Integration:**  If you're using SonarQube, you can generate a report compatible with SonarQube using:
     ```bash
     composer phpstan:sonar
     ```

* If you're using DDEV, you can run these commands within your DDEV environment:
     ```bash
     ddev composer phpstan
     ddev composer phpstan:sonar
     ```

### Configuration
   * The `phpstan.neon.dist` file in your project root provides the base configuration for PHPStan. You can customize it further by creating a `phpstan.neon` file to override or extend the default settings.
   * Key configuration options:
     * `parameters.level`: Sets the analysis level (0-9, higher levels are stricter).
     * `paths`: Specifies which directories or files to analyze.
     * `includes`: Includes additional configuration files.
     * `rules`:  Defines custom rules or excludes specific checks.

## Psalm: Type Safety at its Finest

Psalm takes static analysis a step further by focusing on type safety. It helps you:

* Enforce strict typing in your code
* Identify potential type-related errors
* Improve code readability and maintainability

### Usage - Psalm

Use the following command, which is also defined as a Composer script:

```bash
composer psalm
```

* **In your IDE:** Install the Psalm plugin for your IDE to get instant type checking and suggestions as you code
* **For SonarQube Integration:** Generate a SonarQube-compatible report with
```bash
composer psalm:sonar
```

If you're using DDEV, you can run these commands within your DDEV environment:

```bash
ddev composer psalm
ddev composer psalm:sonar
```

### Configuration

   * The `psalm.xml` file in your project root configures Psalm. Customize it to match your project's specific needs and coding style.
   * Key configuration options:
     * `issueHandler`:  Configure which issue types to report and their severity levels
     * `stubs`: Include external type definitions for third-party libraries
     * `plugins`: Extend Psalm's functionality with plugins

## Phan: Comprehensive Static Analysis

Phan is a powerful static analyzer for PHP that performs comprehensive code analysis. It helps you:

* Detect a wide range of code issues and potential bugs
* Enforce consistent type usage across your codebase
* Identify unused code and variables
* Find duplicate code patterns

### Usage - Phan

Use the following command, which is also defined as a Composer script:

```bash
composer phan
```

* **For SonarQube Integration:** Generate a SonarQube-compatible report with
```bash
composer phan:sonar
```

If you're using DDEV, you can run these commands within your DDEV environment:

```bash
ddev composer phan
ddev composer phan:sonar
```

### Configuration

   * The `.phan/config.php` file in your project root configures Phan. Customize it to match your project's specific needs.
   * Key configuration options:
     * `target_php_version`: Sets the minimum PHP version to target
     * `directory_list`: Specifies which directories to analyze
     * `exclude_analysis_directory_list`: Excludes directories from analysis (e.g., vendor)
     * `plugins`: Enable additional checks and analysis features

## Conclusion

Static analysis tools like PHPStan, Psalm, and Phan are invaluable assets for PHP developers. By integrating them into your PHP projects, you can catch errors early, enforce best practices, and ensure your codebase is robust and maintainable.

## Additional Resources

::list{type="info"}
* [PHPStan Documentation](https://phpstan.org/)
* [Psalm Documentation](https://psalm.dev/)
* [Phan Documentation](https://github.com/phan/phan/wiki)
* [SonarQube](https://www.sonarqube.org/)
::
